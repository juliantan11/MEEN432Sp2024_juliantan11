Utilizing the model we created for week 1 and 2, the team created a module for the electric motor drive module which contains the electric motor and battery as its subsystems. Within the electric motor subsystem, this system calls for throttle command and motor speed as its inputs and outputs motor torque and motor inertia. The battery subsystem takes current as its input into the system and outputs battery voltage. Similar to week 1 and week 2, to run this code you must first run the initialization code and run whatever drive cycle is desired. You can verify that the drive cycle selected ran correctly by clicking on the output graphs. 
For our regenerative braking system, we decided to create a subsystem within our powertrain scope to use regenerative braking. Essentially when torque is negative, our power inverter (regenerative braking subsystem) will send the current
back into the battery pack. A gain block was added to adjust for the energy lost during the regen braking.

We did not adjust the brake pedal as it is dependent on velocity of the car. Our powertrain system accounts for the negative torque from regen braking, thus allowing it to slow down the car when it is not accelerating. 
